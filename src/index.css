@import "tailwindcss";
@config "../tailwind.config.js";
@plugin "tailwindcss-animate";

@layer base {
  :root {
    --background: 220 10% 97%;
    --foreground: 220 15% 8%;

    --card: 0 0% 100%;
    --card-foreground: 220 15% 8%;

    --popover: 0 0% 100%;
    --popover-foreground: 220 15% 8%;

    --primary: 220 12% 15%;
    --primary-foreground: 0 0% 100%;

    --secondary: 220 6% 93%;
    --secondary-foreground: 220 10% 30%;

    --muted: 220 6% 93%;
    --muted-foreground: 220 5% 50%;

    --accent: 220 8% 90%;
    --accent-foreground: 220 12% 15%;

    --destructive: 0 60% 55%;
    --destructive-foreground: 0 0% 100%;

    --border: 220 6% 90%;
    --input: 220 6% 90%;
    --ring: 250 50% 60%;

    --radius: 20px;

    /* Aurora orb colors — FOCUS mode: pink → purple → cyan */
    --aurora-1: 330 80% 75%;
    --aurora-2: 270 70% 74%;
    --aurora-3: 185 65% 74%;
    --aurora-4: 140 55% 80%;

    --mode-accent: 250 50% 60%;

    /* Dot grid */
    --dot-opacity: 0.05;
  }

  .dark {
    --background: 230 15% 6%;
    --foreground: 220 10% 90%;

    --card: 230 12% 10%;
    --card-foreground: 220 10% 90%;

    --popover: 230 12% 10%;
    --popover-foreground: 220 10% 90%;

    --primary: 0 0% 95%;
    --primary-foreground: 230 15% 6%;

    --secondary: 230 10% 12%;
    --secondary-foreground: 220 8% 70%;

    --muted: 230 8% 14%;
    --muted-foreground: 220 5% 45%;

    --accent: 230 10% 16%;
    --accent-foreground: 0 0% 95%;

    --destructive: 0 55% 50%;
    --destructive-foreground: 220 10% 90%;

    --border: 230 8% 14%;
    --input: 230 8% 14%;
    --ring: 250 50% 65%;

    --aurora-1: 330 70% 60%;
    --aurora-2: 270 60% 62%;
    --aurora-3: 185 55% 55%;
    --aurora-4: 140 45% 58%;

    --mode-accent: 250 50% 65%;
    --dot-opacity: 0.04;
  }

  /* Mode: SHORT_BREAK — Cyan / Mint aurora */
  :root[data-mode="SHORT_BREAK"] {
    --aurora-1: 185 65% 72%;
    --aurora-2: 210 55% 70%;
    --aurora-3: 160 60% 72%;
    --aurora-4: 250 45% 78%;
    --mode-accent: 185 50% 55%;
  }

  .dark[data-mode="SHORT_BREAK"] {
    --aurora-1: 185 60% 55%;
    --aurora-2: 210 50% 58%;
    --aurora-3: 160 55% 55%;
    --aurora-4: 250 40% 60%;
    --mode-accent: 185 50% 60%;
  }

  /* Mode: LONG_BREAK — Warm peach / coral aurora */
  :root[data-mode="LONG_BREAK"] {
    --aurora-1: 20 70% 72%;
    --aurora-2: 340 60% 72%;
    --aurora-3: 45 60% 75%;
    --aurora-4: 15 55% 70%;
    --mode-accent: 20 55% 55%;
  }

  .dark[data-mode="LONG_BREAK"] {
    --aurora-1: 20 65% 58%;
    --aurora-2: 340 55% 58%;
    --aurora-3: 45 55% 60%;
    --aurora-4: 15 50% 55%;
    --mode-accent: 20 50% 58%;
  }

  /* Seasonal aurora — only affects FOCUS mode (break modes keep own colors) */
  :root[data-season="spring"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 340 75% 78%;
    --aurora-2: 140 60% 72%;
    --aurora-3: 280 50% 75%;
    --aurora-4: 100 55% 78%;
  }
  .dark[data-season="spring"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 340 65% 62%;
    --aurora-2: 140 55% 55%;
    --aurora-3: 280 45% 58%;
    --aurora-4: 100 50% 60%;
  }

  :root[data-season="summer"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 30 80% 72%;
    --aurora-2: 180 65% 70%;
    --aurora-3: 60 70% 75%;
    --aurora-4: 210 50% 78%;
  }
  .dark[data-season="summer"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 30 70% 58%;
    --aurora-2: 180 60% 52%;
    --aurora-3: 60 60% 58%;
    --aurora-4: 210 45% 60%;
  }

  :root[data-season="autumn"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 15 75% 68%;
    --aurora-2: 40 70% 65%;
    --aurora-3: 350 55% 70%;
    --aurora-4: 55 60% 72%;
  }
  .dark[data-season="autumn"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 15 65% 52%;
    --aurora-2: 40 60% 50%;
    --aurora-3: 350 50% 55%;
    --aurora-4: 55 55% 55%;
  }
  /* Winter uses default aurora colors (cool blue-purple-cyan) */

  /* ─── Weather aurora overrides (FOCUS mode only) ─── */
  :root[data-weather="clear"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 35 80% 75%;
    --aurora-2: 25 70% 72%;
    --aurora-3: 50 65% 78%;
    --aurora-4: 15 60% 74%;
  }
  .dark[data-weather="clear"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 35 70% 58%;
    --aurora-2: 25 60% 55%;
    --aurora-3: 50 55% 60%;
    --aurora-4: 15 50% 56%;
  }

  :root[data-weather="cloudy"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 220 25% 75%;
    --aurora-2: 240 20% 72%;
    --aurora-3: 200 30% 76%;
    --aurora-4: 260 20% 78%;
  }
  .dark[data-weather="cloudy"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 220 20% 50%;
    --aurora-2: 240 18% 48%;
    --aurora-3: 200 25% 52%;
    --aurora-4: 260 18% 52%;
  }

  :root[data-weather="rain"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 210 65% 70%;
    --aurora-2: 230 55% 68%;
    --aurora-3: 195 60% 72%;
    --aurora-4: 250 45% 75%;
  }
  .dark[data-weather="rain"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 210 55% 48%;
    --aurora-2: 230 48% 46%;
    --aurora-3: 195 50% 50%;
    --aurora-4: 250 40% 52%;
  }

  :root[data-weather="snow"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 200 20% 85%;
    --aurora-2: 220 15% 82%;
    --aurora-3: 180 25% 88%;
    --aurora-4: 240 15% 84%;
  }
  .dark[data-weather="snow"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 200 18% 60%;
    --aurora-2: 220 14% 56%;
    --aurora-3: 180 20% 62%;
    --aurora-4: 240 14% 58%;
  }

  :root[data-weather="night"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 260 60% 55%;
    --aurora-2: 280 50% 52%;
    --aurora-3: 230 55% 48%;
    --aurora-4: 300 40% 58%;
  }
  .dark[data-weather="night"]:not([data-mode="SHORT_BREAK"]):not([data-mode="LONG_BREAK"]) {
    --aurora-1: 260 55% 42%;
    --aurora-2: 280 45% 40%;
    --aurora-3: 230 50% 38%;
    --aurora-4: 300 38% 45%;
  }

  /* ─── Deep Focus aurora modifiers ─── */
  :root[data-deep="1"] {
    --aurora-1: 45 75% 72%;
    --aurora-2: 35 65% 70%;
    --aurora-3: 55 60% 75%;
    --aurora-4: 25 55% 68%;
  }
  .dark[data-deep="1"] {
    --aurora-1: 45 65% 55%;
    --aurora-2: 35 55% 52%;
    --aurora-3: 55 50% 58%;
    --aurora-4: 25 48% 50%;
  }

  :root[data-deep="2"] {
    --aurora-1: 45 80% 68%;
    --aurora-2: 30 75% 65%;
    --aurora-3: 55 70% 72%;
    --aurora-4: 20 65% 62%;
  }
  .dark[data-deep="2"] {
    --aurora-1: 45 72% 50%;
    --aurora-2: 30 65% 48%;
    --aurora-3: 55 60% 52%;
    --aurora-4: 20 58% 46%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Sora', sans-serif;
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  ::-webkit-scrollbar {
    width: 4px;
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  ::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 2px;
  }
}

@layer components {
  /* Minimal range slider */
  input[type="range"].cozy-slider {
    -webkit-appearance: none;
    appearance: none;
    background: transparent;
    cursor: pointer;
    height: 20px;
  }

  input[type="range"].cozy-slider::-webkit-slider-track {
    height: 3px;
    background: hsl(var(--muted));
    border-radius: 2px;
  }

  input[type="range"].cozy-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 14px;
    height: 14px;
    background: hsl(var(--foreground));
    border: 2px solid hsl(var(--background));
    border-radius: 50%;
    margin-top: -5.5px;
    box-shadow: 0 1px 4px hsl(var(--foreground) / 0.15);
    transition: transform 0.15s ease;
  }

  input[type="range"].cozy-slider::-webkit-slider-thumb:hover {
    transform: scale(1.15);
  }

  input[type="range"].cozy-slider::-moz-range-track {
    height: 3px;
    background: hsl(var(--muted));
    border-radius: 2px;
    border: none;
  }

  input[type="range"].cozy-slider::-moz-range-thumb {
    width: 14px;
    height: 14px;
    background: hsl(var(--foreground));
    border: 2px solid hsl(var(--background));
    border-radius: 50%;
    box-shadow: 0 1px 4px hsl(var(--foreground) / 0.15);
  }

  input[type="range"].cozy-slider:disabled::-webkit-slider-thumb {
    background: hsl(var(--muted-foreground));
    opacity: 0.3;
  }
}

@layer utilities {
  /* Dot grid background */
  .dot-grid {
    background-image: radial-gradient(circle, hsl(var(--foreground) / var(--dot-opacity)) 1px, transparent 1px);
    background-size: 22px 22px;
  }

  /* Glass — very minimal, near-transparent */
  .glass {
    background: hsl(var(--card) / 0.5);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid hsl(var(--border) / 0.3);
  }

  .glass-strong {
    background: hsl(var(--card) / 0.75);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid hsl(var(--border) / 0.4);
  }

  /* Shadows — very soft */
  .shadow-cozy {
    box-shadow:
      0 1px 2px hsl(var(--foreground) / 0.02),
      0 4px 16px hsl(var(--foreground) / 0.04);
  }

  .shadow-cozy-lg {
    box-shadow:
      0 2px 4px hsl(var(--foreground) / 0.02),
      0 8px 32px hsl(var(--foreground) / 0.06);
  }

  /* Grain — barely visible */
  .grain-overlay {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 30;
    opacity: 0.015;
  }

  /* Hide scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}
