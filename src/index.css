@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 40 30% 97%;
    --foreground: 24 10% 10%;

    --card: 0 0% 100%;
    --card-foreground: 24 10% 10%;

    --popover: 0 0% 100%;
    --popover-foreground: 24 10% 10%;

    --primary: 142 72% 29%;
    --primary-foreground: 40 30% 97%;

    --secondary: 151 81% 96%;
    --secondary-foreground: 142 72% 29%;

    --muted: 40 20% 93%;
    --muted-foreground: 24 5% 45%;

    --accent: 38 92% 50%;
    --accent-foreground: 24 10% 10%;

    --destructive: 0 72% 51%;
    --destructive-foreground: 40 30% 97%;

    --border: 40 15% 87%;
    --input: 40 15% 87%;
    --ring: 142 72% 29%;

    --radius: 0px;

    --sky-from: #e0ecff;
    --sky-via: #fef3c7;
    --sky-to: #f0fdf4;
    --ground-from: #65a30d;
    --ground-to: #365314;
    --ground-edge: #1a2e05;
  }

  .dark {
    --background: 230 50% 7%;
    --foreground: 35 30% 88%;

    --card: 230 40% 10%;
    --card-foreground: 35 30% 88%;

    --popover: 230 40% 10%;
    --popover-foreground: 35 30% 88%;

    --primary: 38 92% 50%;
    --primary-foreground: 230 50% 7%;

    --secondary: 150 30% 12%;
    --secondary-foreground: 35 30% 88%;

    --muted: 230 25% 15%;
    --muted-foreground: 35 15% 60%;

    --accent: 142 72% 40%;
    --accent-foreground: 230 50% 7%;

    --destructive: 0 62% 45%;
    --destructive-foreground: 35 30% 88%;

    --border: 230 20% 18%;
    --input: 230 20% 18%;
    --ring: 38 92% 50%;

    --sky-from: #0c1222;
    --sky-via: #1a1040;
    --sky-to: #0d1a08;
    --ground-from: #1e3a12;
    --ground-to: #0d1a08;
    --ground-edge: #060d04;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'VT323', monospace;
    font-size: 18px;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  ::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
  }
}

/* Pixel range slider */
@layer components {
  input[type="range"].pixel-slider {
    -webkit-appearance: none;
    appearance: none;
    background: transparent;
    cursor: pointer;
    height: 20px;
  }

  input[type="range"].pixel-slider::-webkit-slider-track {
    height: 6px;
    background: hsl(var(--muted));
    border: 2px solid hsl(var(--border));
  }

  input[type="range"].pixel-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 14px;
    height: 14px;
    background: hsl(var(--primary));
    border: 2px solid hsl(var(--foreground) / 0.3);
    margin-top: -6px;
    box-shadow: 2px 2px 0px hsl(var(--foreground) / 0.15);
    transition: transform 0.1s;
  }

  input[type="range"].pixel-slider::-webkit-slider-thumb:hover {
    transform: scale(1.2);
  }

  input[type="range"].pixel-slider::-moz-range-track {
    height: 6px;
    background: hsl(var(--muted));
    border: 2px solid hsl(var(--border));
  }

  input[type="range"].pixel-slider::-moz-range-thumb {
    width: 14px;
    height: 14px;
    background: hsl(var(--primary));
    border: 2px solid hsl(var(--foreground) / 0.3);
    border-radius: 0;
    box-shadow: 2px 2px 0px hsl(var(--foreground) / 0.15);
  }

  input[type="range"].pixel-slider:disabled::-webkit-slider-thumb {
    background: hsl(var(--muted-foreground));
    opacity: 0.5;
  }
}

/* Firefly particle */
@layer utilities {
  .firefly {
    position: absolute;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: hsl(var(--primary));
    box-shadow: 0 0 6px 2px hsl(var(--primary) / 0.4);
    animation: firefly-float var(--duration, 8s) ease-in-out infinite,
               firefly-glow var(--glow-duration, 3s) ease-in-out infinite;
    opacity: 0;
  }

  @keyframes firefly-float {
    0%, 100% {
      transform: translate(0, 0);
    }
    25% {
      transform: translate(var(--dx, 30px), var(--dy, -20px));
    }
    50% {
      transform: translate(calc(var(--dx, 30px) * -0.5), calc(var(--dy, -20px) * 1.5));
    }
    75% {
      transform: translate(calc(var(--dx, 30px) * 0.8), calc(var(--dy, -20px) * -0.3));
    }
  }

  @keyframes firefly-glow {
    0%, 100% {
      opacity: 0;
    }
    40%, 60% {
      opacity: var(--brightness, 0.7);
    }
  }
}
